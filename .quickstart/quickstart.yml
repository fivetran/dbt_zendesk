database_key: zendesk_database
schema_key: zendesk_schema

dbt_versions: ">=1.3.0 <2.0.0"

table_variables:
  using_audit_log:
    - audit_log
  using_schedules:
    - daylight_time
    - schedule
    - time_zone
  using_ticket_schedules:
    - ticket_schedule
  using_domain_names:
    - domain_name
  using_user_tags:
    - user_tag
  using_ticket_form_history:
    - ticket_form_history
  using_organization_tags:
    - organization_tag
  using_schedule_histories:
    - audit_log
  using_holidays:
    - schedule_holiday
  using_brands:
    - brand
  using_organizations:
    - organization
  using_ticket_chat:
    - ticket_chat
    - ticket_chat_event

  _fivetran_quickstart_group:
    - group
  _fivetran_quickstart_tag:
    - ticket_tag

destination_configurations:
  databricks:
    dispatch:
      - macro_namespace: dbt_utils
        search_order: [ 'spark_utils', 'dbt_utils' ]

public_models: [
  "zendesk__ticket_enriched",
  "zendesk__ticket_metrics",
  "zendesk__ticket_summary",
  "zendesk__ticket_field_history",
  "zendesk__sla_policies",
  "zendesk__ticket_backlog"
]

supportedVars:

  zendesk__ticket_passthrough_columns:
    type: dictionary
    description: "Additional ticket fields to include in `zendesk__ticket_enriched` and `zendesk__ticket_metrics`"
    display_name: "Additional Ticket Columns"

  ticket_field_history_columns:
    type: list
    description: "Ticket fields tracked daily in `zendesk__ticket_field_history` and `zendesk__ticket_backlog`"
    display_name: "Ticket Field History Columns"
    value:
      - "assignee_id"
      - "status"
      - "priority"

ticket_field_history_extension_months:
    type: integer
    description: "Number of months that `zendesk__ticket_field_history` will track for each ticket after it has been closed"
    display_name: "Post-Close Ticket Field History Extension (Months)"
    value: 0

ticket_field_history_timeframe_years:
    type: integer
    description: "Number of years into the past that `zendesk__ticket_field_history` and `zendesk__ticket_backlog` will track"
    display_name: "Ticket Field History Timeframe (Years)"
    value: 50